/*
Nibbler - Multi-Base Encoder
version 2010-04-07
Copyright (c) 2010 Thomas Peri
http://www.tumuski.com/
MIT License
*/
var Nibbler=function(A){var B,C,D,E,F,G,H,I,J,K,L,M,N;B=function(){var x,y,z;C=A.pad||'';D=A.dataBits;E=A.codeBits;F=A.keyString;G=A.arrayData;y=Math.max(D,E);z=0;H=[];for(x=0;x<y;x+=1){H.push(z);z+=z+1;}J=z;I=D/K(D,E);};K=function(u,v){var w;while(v!==0){w=v;v=u%v;u=w;}return u;};L=function(f,g,h,j){var k,l,m,o,p,q,r,s;s=function(e){if(!j){r.push(F.charAt(e));}else if(G){r.push(e);}else{r.push(String.fromCharCode(e));}};p=0;q=0;r=[];l=f.length;for(k=0;k<l;k+=1){q+=g;if(j){m=f.charAt(k);o=F.indexOf(m);if(m===C){break;}else if(o<0){throw'the character "'+m+'" is not a member of '+F;}}else{if(G){o=f[k];}else{o=f.charCodeAt(k);}if((o|J)!==J){throw o+" is outside the range 0-"+J;}}p=(p<<g)|o;while(q>=h){q-=h;s(p>>q);p&=H[q];}}if(!j&&q>0){s(p<<(h-q));l=r.length%I;for(k=0;k<l;k+=1){r.push(C);}}return(G&&j)?r:r.join('');};M=function(d){return L(d,D,E,false);};N=function(c){return L(c,E,D,true);};this.encode=M;this.decode=N;B();};
